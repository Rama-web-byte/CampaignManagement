trigger:
- main

pool:
  vmImage: 'windows-latest'

steps:
# Checkout repo
- task: Checkout@1
  displayName: 'Checkout code'

# Install Node.js 18
- task: NodeTool@0
  inputs:
    versionSpec: '18.x'
  displayName: 'Install Node.js 18'

# Build React App
- script: |
    npm install
    npm run build --verbose
  workingDirectory: '$(System.DefaultWorkingDirectory)/campaign-management-app'
  displayName: 'Build React App'

# Debug: Check build folder
- script: dir "$(System.DefaultWorkingDirectory)/campaign-management-app/build"
  displayName: 'Debug React build folder'

# Optional: Copy React build to .NET project (if needed)
# - task: CopyFiles@2
#   inputs:
#     SourceFolder: '$(System.DefaultWorkingDirectory)/campaign-management-app/build'
#     Contents: '**'
#     TargetFolder: '$(System.DefaultWorkingDirectory)/YourDotNetProject/wwwroot'
#   displayName: 'Copy React build to .NET wwwroot'
